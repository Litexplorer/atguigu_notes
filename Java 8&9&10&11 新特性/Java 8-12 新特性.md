---
title: Java 8-12 新特性
time: 2019年10月31日


---

[toc]

## 一、

### 1.0 整体介绍



当一个新的 API出来的时候，不用太着急去学（但是要去了解），因为如果这个 API设计得不好的话，以后就会被弃用，之前花在这个 API上面的接口的时间就白费了。



**主要特点：**

1. 速度更快
   - 在 HashMap 中体现：采用了红黑树作为底层的数据结构；
2. 代码更少：采用了 Lambda 表达式；
3. 强大的 Stream API；
4. 便于并行；
5. 最大化减少空指针异常；
6. Nashorn 引擎，允许在 JVM 上运行 JS 应用；





### 1.1 Lambda 表达式

#### 1.1.1 为什么要使用 Lambda 表达式

Lambda 是一个==匿名函数==，我们可以把 Lambda 表达式理解是一段可以传递的代码（将代码像数据一样传递）。使用它可以写出更简洁、更灵活的代码。作为一种更紧凑的代码风格，使 Java 语言的表达能力得到了提升。





#### 1.1.2 Lambda 表达式的语法以及变形

Lambda 表达式的基本语法为：

```java
 Runnable a = () -> {};
```

`a`的右边是一个匿名函数的 lambda 写法，返回值是一个接口的实例。`() `里面填写形参列表（如果有且只有一个参数，那么小括号可以省略）（如果类型可以推断出来，那么类型也可以省略）；而`{}`里面则填写具体的方法体，（方法体中包含返回语句，和不包含返回语句，这两者的语法时一样的）。

> 注意：如果 `{} `省略了，那么`return` 关键字也必须省略



Lambda 表达式只能适用于“函数式接口”的情况。





### 1.2 函数式（Functional）接口

#### 1.2.1 函数式接口介绍

- 只包含了一个抽象方法的接口，称为函数式接口；
- 我们可以通过 Lambda 表达式来创建接口的对象（如果 Lambda 表达式抛出一个收件踹长（即非运行时异常），那么该异常需要在目标接口的首相方法上进行声明）。
- 我们可以在这个接口上使用注解`@FunctionalInterface`来检查当前接口是否为一个函数式接口；
- 在 `java.util.functional `包下定义了 Java 8 中丰富的函数式接口；





### 1.2.2 Java 内置的四大核心函数式接口





### 1.3 方法引用和构造器引用

#### 1.3.1 介绍

当要传递给 Lambda 体的操作已经有实现的方式时，可以使用方法引用。

方法引用可以看做是 Lambda 表达式深层次的表达，换句话说，方法引用就是 Lambda 表达式，也就是一个函数式接口的一个实例，通过方法的名字来指向一个方法，可以认为是 Lambda 表达式的一个语法糖。



**要求：**

实现接口的抽象方法的参数列表和返回值类型，必须与方法引用的方法的参数列表和返回值类型保持一致！



**格式：**

使用操作符 `::`将类（或对象）与方法名分割开来：

- 对象 :: 实例方法名；
- 类 :: 静态方法名；
- 类 :: 实例方法名；







### 1.4 强大的 Stream API

#### 1.4.1 介绍

Java 8 中有两大最为重要的改变，第一个是 Lambda 表达式另外一个是 Stream API。

Stream API 把真正的函数式编程风格引入到了 Java 中。这是目前为止对 Java 类库最好的补充。因为 Stream API 可以极大提供 Java 程序员的生产力，让程序特写出高校、干净、简洁的代码。

Stream 是 Java 8 中处理集合的关键抽象概念，它可以指定你希望对集合进行的操作，可以执行非常复杂的查找、过滤和映射数据等操作。使用 Stream API 可以对集合数据进行操作，就类似于使用 SQL 执行的数据库查询。也可以使用 Stream API来并行操作。简而言之， Stream API提供了一种高效且易用的处理数据的方式。



####  1.4.2 问什么需要使用 Stream API

实际开发中，项目多数数据都来源于 MySQL、Oracle 等。但现在数据源可以更多了，有 MongDB，Redis等，而这些 NoSQL 的数据就需要 Java 层面进行处理。

Stream 和 Collection 集合的去表： Collection 是一种静态的内错数据结构，而 Stream 是有关计算的。前者主要面向内错，存储在内存中；后者主要面向 CPU，通过CPU实现计算。





使用 Stream.generate() 、Stream.iterator() 可以实现“造数据”的操作；





























